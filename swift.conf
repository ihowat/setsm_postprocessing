
site.bst {
    execution {
        type: "coaster"
        URL:  "bw.ncsa.illinois.edu"
        jobManager: "local:pbs"
        options {
            nodeGranularity: 2
            maxNodesPerJob: 100
            maxJobs: 400
            tasksPerNode: 1
            maxJobTime: "240:00:00"
            spread: 0.9
            jobOptions {
                queue: high
                project: bazu
                pbs.aprun: true
                ppn: 16
                depth: 16
                pbs.resource_list: "walltime=96:00:00,gres=shifter"
                pbs.variable_list: "CRAY_ROOTFS=SHIFTER,UDI='ubuntu:xenial'"
                pbs.properties: "xk"
                jobType: "singleshifter"
            }
            userHomeOverride: "/u/sciteam/"${env.USER}"/swifthome"
        }
    }
    staging: local
    workDirectory: "/scratch/sciteam/GS_bazu/user/"${env.USER}"/swiftwork"
    maxParallelTasks: 32000
    initialParallelTasks: 32000
    app.bashcoaster {
      executable: "/bin/bash"
      maxWallTime: "96:00:00"
    }
}

site.downsample {
    execution {
        type: "coaster"
        URL:  "bw.ncsa.illinois.edu"
        jobManager: "local:pbs"
        options {
            nodeGranularity: 2
            maxNodesPerJob: 100
            maxJobs: 400
            tasksPerNode: 1
            maxJobTime: "240:00:00"
            spread: 0.9
            jobOptions {
                queue: high
                project: bazu
                pbs.aprun: true
                ppn: 32
                depth: 32
                pbs.resource_list: "walltime=24:00:00"
                jobType: "single"
            }
            userHomeOverride: "/u/sciteam/"${env.USER}"/swifthome"
        }
    }
    staging: local
    workDirectory: "/scratch/sciteam/GS_bazu/user/"${env.USER}"/swiftwork"
    maxParallelTasks: 32000
    initialParallelTasks: 32000
    app.bashcoaster {
      executable: "/bin/bash"
      maxWallTime: "24:00:00"
    }
}

site.compress {
    execution {
        type: "coaster"
        URL:  "bw.ncsa.illinois.edu"
        jobManager: "local:pbs"
        options {
            nodeGranularity: 2
            maxNodesPerJob: 100
            maxJobs: 400
            tasksPerNode: 1
            maxJobTime: "240:00:00"
            spread: 0.9
            jobOptions {
                queue: high
                project: bazu
                pbs.aprun: true
                ppn: 4
                depth: 4
                pbs.resource_list: "walltime=24:00:00"
                jobType: "single"
            }
            userHomeOverride: "/u/sciteam/"${env.USER}"/swifthome"
        }
    }
    staging: local
    workDirectory: "/scratch/sciteam/GS_bazu/user/"${env.USER}"/swiftwork"
    maxParallelTasks: 32000
    initialParallelTasks: 32000
    app.bashcoaster {
      executable: "/bin/bash"
      maxWallTime: "24:00:00"
    }
}

site.s2s {
    execution {
        type: "coaster"
        URL:  "bw.ncsa.illinois.edu"
        jobManager: "local:pbs"
        options {
            nodeGranularity: 2
            maxNodesPerJob: 100
            maxJobs: 400
            tasksPerNode: 1
            maxJobTime: "240:00:00"
            spread: 0.9
            jobOptions {
                queue: normal
                project: bazu
                pbs.aprun: true
                ppn: 32
                depth: 32
                pbs.resource_list: "walltime=20:00:00"
                jobType: "single"
            }
            userHomeOverride: "/u/sciteam/"${env.USER}"/swifthome"
        }
    }
    staging: local
    workDirectory: "/scratch/sciteam/GS_bazu/user/"${env.USER}"/swiftwork"
    maxParallelTasks: 32000
    initialParallelTasks: 32000
    app.bashcoaster {
      executable: "/bin/bash"
      maxWallTime: "20:00:00"
    }
}

site.s2shigh {
    execution {
        type: "coaster"
        URL:  "bw.ncsa.illinois.edu"
        jobManager: "local:pbs"
        options {
            nodeGranularity: 2
            maxNodesPerJob: 100
            maxJobs: 400
            tasksPerNode: 1
            maxJobTime: "240:00:00"
            spread: 0.9
            jobOptions {
                queue: high
                project: bazu
                pbs.aprun: true
                ppn: 32
                depth: 32
                pbs.resource_list: "walltime=20:00:00"
                jobType: "single"
            }
            userHomeOverride: "/u/sciteam/"${env.USER}"/swifthome"
        }
    }
    staging: local
    workDirectory: "/scratch/sciteam/GS_bazu/user/"${env.USER}"/swiftwork"
    maxParallelTasks: 32000
    initialParallelTasks: 32000
    app.bashcoaster {
      executable: "/bin/bash"
      maxWallTime: "20:00:00"
    }
}

site.s2shimem {
    execution {
        type: "coaster"
        URL:  "bw.ncsa.illinois.edu"
        jobManager: "local:pbs"
        options {
            nodeGranularity: 1
            maxNodesPerJob: 10
            maxJobs: 100
            tasksPerNode: 1
            maxJobTime: "240:00:00"
            spread: 0.9
            jobOptions {
                queue: high
                project: bazu
                pbs.aprun: true
                ppn: 32
                depth: 32
                pbs.resource_list: "walltime=20:00:00"
                pbs.properties: "xehimem"
                jobType: "single"
            }
            userHomeOverride: "/u/sciteam/"${env.USER}"/swifthome"
        }
    }
    staging: local
    workDirectory: "/scratch/sciteam/GS_bazu/user/"${env.USER}"/swiftwork"
    maxParallelTasks: 32000
    initialParallelTasks: 32000
    app.bashcoaster {
      executable: "/bin/bash"
      maxWallTime: "20:00:00"
    }
}

site.setsm2m {
    execution {
        type: "coaster"
        URL:  "bw.ncsa.illinois.edu"
        jobManager: "local:pbs"
        options {
            nodeGranularity: 2
            maxNodesPerJob: 100
            maxJobs: 400
            tasksPerNode: 1
            maxJobTime: "240:00:00"
            spread: 0.9
            jobOptions {
                queue: normal
                project: bazu
                pbs.aprun: true
                ppn: 32
                depth: 32
                pbs.resource_list: "walltime=96:00:00"
                jobType: "single"
            }
            userHomeOverride: "/u/sciteam/"${env.USER}"/swifthome"
        }
    }
    staging: local
    workDirectory: "/scratch/sciteam/GS_bazu/user/"${env.USER}"/swiftwork"
    maxParallelTasks: 32000
    initialParallelTasks: 32000
    app.bashcoaster {
      executable: "/bin/bash"
      maxWallTime: "96:00:00"
    }
}

site.setsm2mhigh {
    execution {
        type: "coaster"
        URL:  "bw.ncsa.illinois.edu"
        jobManager: "local:pbs"
        options {
            nodeGranularity: 2
            maxNodesPerJob: 100
            maxJobs: 400
            tasksPerNode: 1
            maxJobTime: "240:00:00"
            spread: 0.9
            jobOptions {
                queue: high
                project: bazu
                pbs.aprun: true
                ppn: 32
                depth: 32
                pbs.resource_list: "walltime=96:00:00"
                jobType: "single"
            }
            userHomeOverride: "/u/sciteam/"${env.USER}"/swifthome"
        }
    }
    staging: local
    workDirectory: "/scratch/sciteam/GS_bazu/user/"${env.USER}"/swiftwork"
    maxParallelTasks: 32000
    initialParallelTasks: 32000
    app.bashcoaster {
      executable: "/bin/bash"
      maxWallTime: "96:00:00"
    }
}

site.setsm2mhimem {
    execution {
        type: "coaster"
        URL:  "bw.ncsa.illinois.edu"
        jobManager: "local:pbs"
        options {
            nodeGranularity: 1
            maxNodesPerJob: 10
            maxJobs: 100
            tasksPerNode: 1
            maxJobTime: "240:00:00"
            spread: 0.9
            jobOptions {
                queue: high
                project: bazu
                pbs.aprun: true
                ppn: 32
                depth: 32
                pbs.resource_list: "walltime=96:00:00"
                pbs.properties: "xehimem"
                jobType: "single"
            }
            userHomeOverride: "/u/sciteam/"${env.USER}"/swifthome"
        }
    }
    staging: local
    workDirectory: "/scratch/sciteam/GS_bazu/user/"${env.USER}"/swiftwork"
    maxParallelTasks: 32000
    initialParallelTasks: 32000
    app.bashcoaster {
      executable: "/bin/bash"
      maxWallTime: "96:00:00"
    }
}

site.setsm50cm {
    execution {
        type: "coaster"
        URL:  "bw.ncsa.illinois.edu"
        jobManager: "local:pbs"
        options {
            nodeGranularity: 2
            maxNodesPerJob: 100
            maxJobs: 400
            tasksPerNode: 1
            maxJobTime: "240:00:00"
            spread: 0.9
            jobOptions {
                queue: normal
                project: bazu
                pbs.aprun: true
                ppn: 32
                depth: 32
                pbs.resource_list: "walltime=96:00:00"
                jobType: "single"
            }
            userHomeOverride: "/u/sciteam/"${env.USER}"/swifthome"
        }
    }
    staging: local
    workDirectory: "/scratch/sciteam/GS_bazu/user/"${env.USER}"/swiftwork"
    maxParallelTasks: 32000
    initialParallelTasks: 32000
    app.bashcoaster {
      executable: "/bin/bash"
      maxWallTime: "96:00:00"
    }
}

site.setsm50cmhigh {
    execution {
        type: "coaster"
        URL:  "bw.ncsa.illinois.edu"
        jobManager: "local:pbs"
        options {
            nodeGranularity: 2
            maxNodesPerJob: 100
            maxJobs: 400
            tasksPerNode: 1
            maxJobTime: "240:00:00"
            spread: 0.9
            jobOptions {
                queue: high
                project: bazu
                pbs.aprun: true
                ppn: 32
                depth: 32
                pbs.resource_list: "walltime=96:00:00"
                jobType: "single"
            }
            userHomeOverride: "/u/sciteam/"${env.USER}"/swifthome"
        }
    }
    staging: local
    workDirectory: "/scratch/sciteam/GS_bazu/user/"${env.USER}"/swiftwork"
    maxParallelTasks: 32000
    initialParallelTasks: 32000
    app.bashcoaster {
      executable: "/bin/bash"
      maxWallTime: "96:00:00"
    }
}

site.setsm50cmhimem {
    execution {
        type: "coaster"
        URL:  "bw.ncsa.illinois.edu"
        jobManager: "local:pbs"
        options {
            nodeGranularity: 1
            maxNodesPerJob: 10
            maxJobs: 100
            tasksPerNode: 1
            maxJobTime: "240:00:00"
            spread: 0.9
            jobOptions {
                queue: high
                project: bazu
                pbs.aprun: true
                ppn: 32
                depth: 32
                pbs.resource_list: "walltime=96:00:00"
                pbs.properties: "xehimem"
                jobType: "single"
            }
            userHomeOverride: "/u/sciteam/"${env.USER}"/swifthome"
        }
    }
    staging: local
    workDirectory: "/scratch/sciteam/GS_bazu/user/"${env.USER}"/swiftwork"
    maxParallelTasks: 32000
    initialParallelTasks: 32000
    app.bashcoaster {
      executable: "/bin/bash"
      maxWallTime: "96:00:00"
    }
}

# override distribution default local site
site.local: null

site.local {
    execution {
        type: "local"
    }
    staging: local
    workDirectory: "/scratch/sciteam/GS_bazu/user/"${env.USER}"/swiftwork"
    app.bashlocal {
      executable: "/bin/bash"
    }
}

TCPPortRange: "50000,51000"                           # TCP port range used by swift to communicate with remote sites
# changed to tolerate errors
lazyErrors: true                                      # Swift fails immediately upon encountering an error
# changed to try 4 retries, was 0
executionRetries: 4                                   # Set number of retries upon task failures
keepSiteDir: true                                     # Keep Site Dir (useful for debug)
providerStagingPinSwiftFiles: false                   # Pin staging files (useful for debug)
alwaysTransferWrapperLog: true                        # Transfer wrapper logs (useful for debug)
